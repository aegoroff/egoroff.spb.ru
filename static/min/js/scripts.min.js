(function(){var e,t,n;window.LOG=function(){return typeof console!="undefined"&&console!==null?typeof console.log=="function"?console.log.apply(console,arguments):void 0:void 0},window.init_loading_button=function(){return $("body").on("click",".btn-loading",function(){return $(this).button("loading")})},window.service_call=function(e,t,n,r,i){var s,o;i=i||r||n,r=r||n,arguments.length===4&&(r=void 0),arguments.length===3&&(n=void 0,r=void 0),n=n||{};for(s in n)o=n[s],o==null&&delete n[s];return $.ajax({type:e,url:t+"?"+$.param(n),contentType:"application/json",accepts:"application/json",dataType:"json",data:r?JSON.stringify(r):void 0,success:function(t){var n;return t.status==="success"?(n=void 0,t.more_url&&(n=function(n){return service_call(e,t.more_url,{},n)}),typeof i=="function"?i(void 0,t.result,n):void 0):typeof i=="function"?i(t):void 0},error:function(e,t,n){var r,s;s={error_code:"ajax_error",text_status:t,error_thrown:n,jqXHR:e};try{e.responseText&&(s=$.parseJSON(e.responseText))}catch(o){r=o,s=s}return LOG("service_call error",s),typeof i=="function"?i(s):void 0}})},$(function(){return LOG("app init")}),$(function(){return $("html.welcome").each(function(){return LOG("init welcome")})}),$(function(){return $("html.profile").each(function(){return init_profile()})}),$(function(){return $("html.feedback").each(function(){return init_loading_button()})}),$(function(){return $("html.admin-config").each(function(){return init_admin_config()})}),window.init_profile=function(){return init_loading_button()},window.init_admin_config=function(){return init_loading_button()},$(function(){var e,r,i;return e="/api/v2/posts.json",i=$("button#moreNews").click(function(){var t,r,i,s;return s=$("input#offsetValue"),r=$("input#limitValue"),i=s.val(),t=r.val(),$.get(e+"?offset="+i+"&limit="+t,n),s.attr("value",parseInt(i)+parseInt(t))}),i.button(),r=$("div#accordion > div > ul > li > a"),r.click(function(n){var r,i,s,o,u,a,f,l,c;i=n.target.hash,a=i.split("&"),f=1,s=1;for(l=0,c=a.length;l<c;l++)u=a[l],o=u.split("="),o[0]==="month"?s=o[1]:f=o[1];return r=$("body").find("dl#blog"),r.empty(),r.append("<dt>Загрузка данных. Пожалуйста подождите ...</dt>"),$.get(e+"?year="+f+"&month="+s,t)}),r.button()}),n=function(t){var n,r,i;n=$("body").find("dl#log"),e(t.result,n),i=$("input#limitValue"),r=i.val();if(t.count<parseInt(r))return $("button#moreNews").remove()},t=function(t){var n,r;n=$("body").find("dl#blog"),n.empty(),e(t.result,n),r=20;if(t.count<r)return $("ul.pager").remove(),$("div.pagination").remove()},e=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p;p=[];for(c=0,h=e.length;c<h;c++)u=e[c],i=u.created,i=i.substring(0,i.length-4),l=u.title,s=u.short_text,o=$.format.date(i,"dd MMMM yyyy"),n=window.location.origin,r=window.location.href,a=n+"/blog/"+u.id+".html",f='<a href="'+a+'">'+l+"</a>",r===a&&(f="<span>"+l+"</span>"),t.append('<dt><small><i class="icon-calendar"></i> <span class="shortDateFormat">'+o+"</span></small>&nbsp;"+f+"</dt>"),p.push(t.append("<dd>"+s+"</dd>"));return p}}).call(this);