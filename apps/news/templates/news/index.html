{% extends 'base.html' %}

{% block content %}
    <!-- Main hero unit for a primary marketing message or call to action -->
    <div class="hero-unit">
        <h1>{{ title }}</h1>

        <p>Многое из того, что написано на этом сайте сильно устарело и/или является неверным и смешным. В какой-то
            мере
            этот сайт отражает мой путь как разработчика. Полезность/бесполезность этих материалов определяйте
            сами.</p>
    </div>
    <div class="row-fluid">
        <div class="span12">
            {% if not posts %}
                Ничего нет
            {% else %}
                <dl>
                    {% for post in posts.object_list %}
                        {% include 'news/post_box.html' %}
                    {% endfor %}
                </dl>
            {% endif %}
        </div>
        {% if "tag" in request.args %}
            {% set tag_query = "?tag=" + request.args["tag"] %}
        {% else %}
            {% set tag_query = "" %}
        {% endif %}
        <ul class="pager">
            {% if posts.has_previous %}
                <li class="previous">
                    <a href="{{ url_for(
                                'news.index',
                                page=posts.previous_page_number) }}{{ tag_query }}"
                       class="prev">
                        &larr; новее
                    </a>
                </li>
            {% else %}
                <li class="disabled previous">
                    <a href="#">&larr; новее</a>
                </li>
            {% endif %}

            {% if posts.has_next %}
                <li class="next">
                    <a href="{{ url_for('news.index', page=posts.next_page_number) }}{{ tag_query }}"
                       class="next">старее &rarr;</a>
                </li>
            {% else %}
                <li class="next disabled">
                    <a href="#"
                       class="next">старее &rarr;</a>
                </li>
            {% endif %}
        </ul>
        <div class="pagination">
            <ul style="float: left;">
                {% for page in posts.paginator.page_range %}
                    {% if page %}
                        {% if page == posts.number %}
                            <li class="active">
                                <a href="{{ url_for('news.index', page=page) }}{{ tag_query }}" class="page">{{ page }}</a>
                            </li>
                        {% else %}
                            <li>
                                <a href="{{ url_for('news.index', page=page) }}{{ tag_query }}" class="page">{{ page }}</a>
                            </li>
                        {% endif %}
                    {% else %}
                        ......
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
    </div>
{% endblock %}