{% extends 'base.html' %}

# block scripts
<script>
    $(function () {
        $("#accordion").accordion({
            collapsible: true,
            heightStyle: "content"
        });
    });
</script>

# include 'news/blog_model.html'

<script>
    vm = new window.BlogViewModel();
    ko.applyBindings(vm);

    window.LoadBlog = function(query) {
        vm.getPostsUsingQuery(query, false);
    }
</script>
# endblock

{% block head %}
    <link type="text/css" rel='stylesheet' href="/p/css/jquery-ui-1.10.3.custom.min.css">
{% endblock %}


{% block content %}
    {% strip %}
    <div class="row-fluid">
        <div class="span9">
            {% if not posts %}
                Ничего нет
            {% else %}
                <dl id="blogcontainer">
                    {% for post in posts.object_list %}
                        {% include 'news/post_box.html' %}
                    {% endfor %}
                </dl>
                <dl id="log" data-bind="template: {
                        name: 'blog',
                        foreach: blogPosts,
                        afterRender: postProcessingLogic
                        }">
                </dl>
            {% endif %}
            {% include 'news/paginator.html' %}
        </div>
        <div class="span3">
            <h3>Метки</h3>
            {% include 'news/tags.html' %}
            <h3>Архив</h3>
            {% include 'news/archive.html' %}
        </div>
    </div>
    {% endstrip %}
{% endblock %}